##These the UU ones

uu_portugal_1_cities = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		has_dlc = "Golden Century"
		tag = POR
		NOT = { map_setup = map_setup_random }
		is_random_new_world = no
	}
	has_country_shield = yes

	uu_por_develop_new_cities = { #todo
		icon = mission_lusitanian_empire
		required_missions = { }
		position = 1 #just in case

		provinces_to_highlight = {
			#low dev 
		}
		trigger = {
			#develop cities like khmer/korea 
		}
		effect = {

		}
	}
	uu_por_cultural_center = { #todo
		icon = mission_lusitanian_empire
		required_missions = { uu_por_develop_new_cities }
		position = 3 #double space

		provinces_to_highlight = {
			#coimbra
		}
		trigger = {
			#dev it? perma province mod? 
		}
		effect = {

		}
	}
	uu_por_arts_letters = { #from vanilla
		icon = mission_arts_and_letters
		required_missions = { uu_por_cultural_center }
		position = 4
		
		provinces_to_highlight = {
			province_id = 227
			NOT = { 
				has_building = university 
				owned_by = ROOT
			}			
		}
		
		trigger = {
			university = 8
			227 = {
				has_building = university
				owned_by = ROOt
			}
		}
		effect = {
			add_country_modifier = {
				name = "por_arts_and_letters"
				duration = 7300
			}
		}
	}
}

uu_portugal_2_ports = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		has_dlc = "Golden Century"
		tag = POR
		NOT = { map_setup = map_setup_random }
		is_random_new_world = no
	}
	has_country_shield = yes

	uu_por_develop_ports = { #todo
		icon = mission_lusitanian_empire
		required_missions = { }
		position = 1 #just in case

		provinces_to_highlight = {
			#ports, not developed
		}
		trigger = {
			#dev it? 
		}
		effect = {
			#idk
		}
	}

	uu_por_fortify_funchal = { #todo
		icon = mission_lusitanian_empire
		required_missions = { uu_por_develop_ports }
		position = 2 #just in case

		provinces_to_highlight = {
			#madeira
		}
		trigger = {
			#dev it? fort?
		}
		effect = {
			#spawn cot in madeira
		}
	}

	uu_por_wine_monopolies = { #from vanilla
		icon = mission_wine_monopolies
		required_missions = { uu_por_fortify_funchal }
		position = 3
		
		provinces_to_highlight = {
			trade_goods = wine
			NOT = { owned_by = ROOT }
			NOT = {
				OR = {
					has_building = workshop
					has_building = counting_house
				}
			}
			has_discovered = ROOT
		}
		
		trigger = {
			OR = {
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					value = 10
					trade_goods = wine
					OR = {
						has_building = workshop
						has_building = counting_house
					}
				}
				trading_bonus = {
					trade_goods = wine
					value = yes
				}
				production_leader = {
					trade_goods = wine
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = "por_wine_monopolies"
				duration = 7300
			}
		}
	}

	uu_por_great_trading_houses = { #from vanilla
		icon = mission_great_trading_houses
		required_missions = { uu_por_wine_monopolies }
		position = 4
		
		provinces_to_highlight = {
			province_id = 1293
		}
		
		trigger = {
			OR = {
				num_of_merchants = 6
				1293 = {
					is_strongest_trade_power = ROOT
				}
			}
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 10
				OR = {
					has_building = trade_depot
					has_building = stock_exchange
				
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = "por_houses_of_trade"
				duration = 7300
			}
		}
	}

	uu_por_torre_de_belem = { #new
		icon = mission_lusitanian_empire
		required_missions = { uu_por_great_trading_houses }
		position = 5

		provinces_to_highlight = {
			#lisbon
		}
		
		trigger = {
			#upgraded torre? maybe cot lv3?
		}
		effect = {
			#maybe the effect upgrades the tower
		}
	}

	uu_por_new_sevilla = { #new
		icon = mission_lusitanian_empire
		required_missions = { uu_por_torre_de_belem }
		position = 6

		provinces_to_highlight = {
			#lisbon again?
		}
		
		trigger = {
			#idk
		}
		effect = {
			#perma mod in lisbon
		}
	}
}

uu_portugal_3_navy = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		has_dlc = "Golden Century"
		tag = POR
		NOT = { map_setup = map_setup_random }
		is_random_new_world = no
	}
	has_country_shield = yes

	uu_por_launch_flagship = { #from vanilla
		icon = mission_launch_a_flagship
		required_missions = { uu_por_develop_ports }
		completed_by = 1445.1.1
		position = 2
		
		trigger = {
			has_flagship = yes
		}
		effect = {
			add_navy_tradition = 20
			leon_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			extremadura_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT	}
				}
				add_permanent_claim = ROOT
			}
			lower_andalucia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	uu_por_beyond_cape_bojador = { #from vanilla?
		icon = mission_establish_high_seas_navy
		required_missions = { uu_por_launch_flagship }
		completed_by = 1445.1.1
		position = 3
		
		trigger = {
			custom_trigger_tooltip = {
				tooltip = miss_discover_west_africa
				west_africa_coast_area = {
					has_discovered = ROOT
				}
			}
			num_of_colonists = 1
		}
		
		effect = {
			add_prestige = 10
			add_country_modifier = {
				name = "the_unknown_frontier"
				duration = 5475
			}
		}
	}

	uu_por_portuguese_fusiliers = { #new
		icon = mission_lusitanian_empire
		required_missions = { uu_por_beyond_cape_bojador }
		position = 4

		provinces_to_highlight = {
			#idk
		}
		
		trigger = {
			#idk, naval doctrine?
		}
		effect = {
			#upgraded naval doctrine?
		}
	}

	uu_por_iberian_thalassocracy = { #new
		icon = mission_lusitanian_empire
		required_missions = { uu_por_portuguese_fusiliers }
		position = 5

		provinces_to_highlight = {
			#idk
		}
		
		trigger = {
			#idk, many boat? much trade?
		}
		effect = {
			#perma modifier
		}
	}
}

uu_portugal_4_diplo = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		has_dlc = "Golden Century"
		tag = POR
		NOT = { map_setup = map_setup_random }
		is_random_new_world = no
	}
	has_country_shield = yes

	uu_por_english_alliance = {
		icon = mission_anglo_portuguese_alliance
		required_missions = {  }
		position = 1
		
		trigger = {
			if = {
				limit = {
					NOT = {
						exists = GBR
					}
				}
				OR = {
					AND = {
						alliance_with = ENG
						reverse_has_opinion = {
							who = ENG
							value = 100
						}
					}
					is_rival = ENG
					NOT = { exists = ENG }
				}
			}
			else = {
				OR = {
					AND = {
						alliance_with = GBR
						reverse_has_opinion = {
							who = GBR
							value = 100
						}
					}
					is_rival = GBR
				}
			}
		}
		effect = {
			if = {
				limit = {
					alliance_with = ENG
				}
				ENG = {
					add_opinion = {
						who = root
						modifier = anglo_portuguese_alliance
					}
				}
				hidden_effect = {
					root = {
						add_opinion = {
							who = ENG
							modifier = anglo_portuguese_alliance
						}
					}
				}
			}
			galicia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			asturias_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	uu_por_intervene_in_castile = { #new
		icon = mission_lusitanian_empire
		required_missions = { uu_por_english_alliance }
		position = 2

		provinces_to_highlight = {
			#idk
		}
		
		trigger = {
			#idk, integration with cas civil war?
		}
		effect = {
			#event that unlocks the mini branch
		}
	}

	uu_por_iberian_diplomacy = { #new
		icon = mission_lusitanian_empire
		required_missions = { uu_por_intervene_in_castile }
		position = 3

		provinces_to_highlight = {
			#idk
		}
		
		trigger = {
			#idk, integration with cas civil war?
		}
		effect = {
			#event that unlocks the mini branch
		}
	}

	uu_por_tordesillas = { #new
		icon = mission_sail_to_the_east_indies
		required_missions = { uu_por_iberian_diplomacy }
		position = 4
		completed_by = 1494.7.2

		trigger = {
			OR = {
				AND = {
					OR = {
						any_owned_province = {
							continent = africa
							NOT = { region = maghreb_region }
							NOT = { region = egypt_region }
						}
						any_owned_province = {
							continent = north_america
						}
						any_owned_province = {
							continent = south_america
						}
					}
					OR = {
						has_idea = land_of_opportunity #explo 4
						dip_tech = 7
					}
				}
				custom_trigger_tooltip = { #if portugal passes the mission, it will unlock for you too
					tooltip = uu_spa_tordesillas_already_signed_tt
					OR = {
						has_country_flag = uu_por_flag_west_path
						has_country_flag = uu_por_flag_east_path
					}
				}
			}
			is_subject = no #no weird edge cases where you are a subject yet fire the event before your overlord
			papal_influence = 50
		}

		effect = {
			add_papal_influence = -50
			if = { #no double firing
				limit = {
					NOT = {
						has_country_flag = uu_por_flag_west_path
						has_country_flag = uu_por_flag_east_path					
					}
				}		
				country_event = {
					id = uu_spa_events.101 
				}
			}
		}
	}
}

uu_portugal_5_morocco = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		has_dlc = "Golden Century"
		tag = POR
		NOT = { map_setup = map_setup_random }
		is_random_new_world = no
	}
	has_country_shield = yes

	uu_por_competitive_advantage = {
		icon = mission_sea_battles
		required_missions = {}
		position = 1
		completed_by = 1470.1.1
		
		trigger = {
			navy_size_percentage = 1
		}
		
		effect = {
			add_dip_power = 50
			add_navy_tradition = 15
			334 = {
				if = {
					limit = {
						NOT = {
							is_permanent_claim = ROOT
							is_core = ROOT
						}
					}
					add_permanent_claim = ROOT
				}
			}
		}
	}
	uu_por_avenge_holy_prince = { #todo
		icon = mission_unite_home_region
		required_missions = { uu_por_competitive_advantage }
		position = 2
		
		provinces_to_highlight = {
			#mor capital?
		}
		
		trigger = {
			#humiliated morocco? occupies mor capital? like eng mission with paris? mor not exists?
		}
		
		effect = {
			add_adm_power = 150
			add_prestige = 5
			western_morocco_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			southern_morocco_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_claim = ROOT }
				}
				add_claim = ROOT
			}
		}
	}
	
	uu_por_buffer_zone = { #add cas integration todo
		icon = mission_arabian_fort
		required_missions = { 
			uu_por_avenge_holy_prince
			uu_por_intervene_in_castile
		}
		completed_by = 1488.1.1
		position = 3
		
		provinces_to_highlight = {
			OR = {
				area = western_morocco_area
				province_id = 334
			}
			NOT = { owned_by = ROOT }
		}
		
		trigger = {
			owns = 334
			western_morocco_area = {
				type = all
				owned_by = ROOT
			}
		}
		
		effect = {
			western_morocco_area = {
				limit = { 
					owned_by = ROOT
				}
				add_province_modifier = {
					name = "buffer_zone_commerce"
					duration = 5475
				}
			}
			northern_morocco_area = {
				limit = { 
					owned_by = ROOT
				}
				add_province_modifier = {
					name = "buffer_zone_commerce"
					duration = 5475
				}
			}
			southern_morocco_area = {
				limit = { 
					owned_by = ROOT
				}
				add_province_modifier = {
					name = "buffer_zone_commerce"
					duration = 5475
				}
			}
		}
	}
}

uu_portugal_4_branching = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		has_dlc = "Golden Century"
		tag = POR
		NOT = { map_setup = map_setup_random }
		NOT = { has_country_flag = uu_por_flag_west_path}
		NOT = { has_country_flag = uu_por_flag_east_path }
		is_random_new_world = no
	}
	has_country_shield = yes

	uu_por_branching_c4r5 = { #todo?
		icon =  mission_unknown_mission
		required_missions = { uu_por_tordesillas }
		position = 5
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
			#add actual requirements?
		}
		effect = {
			#tooltippery
		}
	}
}

uu_portugal_2_western_path = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		has_dlc = "Golden Century"
		tag = POR
		NOT = { map_setup = map_setup_random }
		has_country_flag = uu_por_flag_west_path
		NOT = { has_country_flag = uu_por_flag_east_path }
		is_random_new_world = no
	}
	has_country_shield = yes
}

uu_portugal_3_western_path = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		has_dlc = "Golden Century"
		tag = POR
		NOT = { map_setup = map_setup_random }
		has_country_flag = uu_por_flag_west_path
		NOT = { has_country_flag = uu_por_flag_east_path }
		is_random_new_world = no
	}
	has_country_shield = yes
}

uu_portugal_4_western_path = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		has_dlc = "Golden Century"
		tag = POR
		NOT = { map_setup = map_setup_random }
		has_country_flag = uu_por_flag_west_path
		NOT = { has_country_flag = uu_por_flag_east_path }
		is_random_new_world = no
	}
	has_country_shield = yes
}

uu_portugal_5_western_path = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		has_dlc = "Golden Century"
		tag = POR
		NOT = { map_setup = map_setup_random }
		has_country_flag = uu_por_flag_west_path
		NOT = { has_country_flag = uu_por_flag_east_path }
		is_random_new_world = no
	}
	has_country_shield = yes	
}


uu_portugal_2_eastern_path = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		has_dlc = "Golden Century"
		tag = POR
		NOT = { map_setup = map_setup_random }
		#NOT = { has_country_flag = uu_por_flag_west_path}
		has_country_flag = uu_por_flag_east_path
		is_random_new_world = no
	}
	has_country_shield = yes

	uu_por_african_gold = {
		icon = mission_african_gold
		required_missions = { uu_por_shipyards_of_the_east }
		position = 8
		
		provinces_to_highlight = {
			OR = {
				area = zimbabwe_area
				area = butua_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			zimbabwe_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			butua_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			1188 = {
				if = {
					limit = { trade_goods = gold }
					add_province_modifier = {
						name = "por_african_gold_modifier"
						duration = 7300
					}
				}
			}
			1185 = {
				if = {
					limit = { trade_goods = gold }
					add_province_modifier = {
						name = "por_african_gold_modifier"
						duration = 7300
					}
				}
			}
			1184 = {
				if = {
					limit = { trade_goods = gold }
					add_province_modifier = {
						name = "por_african_gold_modifier"
						duration = 7300
					}
				}
			}
			1186 = {
				if = {
					limit = { trade_goods = gold }
					add_province_modifier = {
						name = "por_african_gold_modifier"
						duration = 7300
					}
				}
			}
		}
	}
	uu_por_ceylon = {
		icon = mission_portuguese_ceylon
		required_missions = { uu_por_malabar }
		position = 10
		
		provinces_to_highlight = {
			OR = {
				area = lanka_area
				area = south_lanka_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			lanka_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			south_lanka_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_mercantilism = 3
		}
	}	
}

uu_portugal_3_eastern_path = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		has_dlc = "Golden Century"
		tag = POR
		NOT = { map_setup = map_setup_random }
		#NOT = { has_country_flag = uu_por_flag_west_path}
		has_country_flag = uu_por_flag_east_path
		is_random_new_world = no
	}
	has_country_shield = yes

	uu_por_cape_of_good_hope = {
		icon = mission_sea_battles
		required_missions = { uu_por_colonize_west_africa }
		completed_by = 1499.1.1
		position = 6
		
		trigger = {
			custom_trigger_tooltip = {
				tooltip = miss_discover_south_africa
				south_africa_region = {
					has_discovered = ROOT
				}
			}
			light_ship_fraction = 0.25
			navy_size_percentage = 1
		}
	
		effect = {
			add_prestige = 10
			add_yearly_sailors = 3
			cape_of_good_hope_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			mozambique_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			1186 = {
				add_permanent_claim = ROOT
			}
			1192 = {
				add_permanent_claim = ROOT
			}
		}
	}
	uu_por_shipyards_of_the_east = {
		icon = mission_have_two_subjects
		required_missions = { uu_por_cape_of_good_hope }
		completed_by = 1530.1.1
		position = 7
		
		provinces_to_highlight = {
			OR = {
				province_id = 1186
				province_id = 1192
				area = mozambique_area
			}
			NOT = { owned_by = ROOT }
			has_discovered = ROOT
		}
		
		trigger = { 
			custom_trigger_tooltip = {
				tooltip = miss_discover_east_africa
				east_africa_region = {
					has_discovered = ROOT
				}
			}
			1186 = {
				owned_by = ROOT
			}
			1192 = {
				owned_by = ROOT
			}
			mozambique_area = {
				type = all
				owned_by = ROOT
			}
		}
	
		effect = {
			add_prestige = 10
			majarteen_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_claim = ROOT
			}
			zimbabwe_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			butua_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			1201 = {
				add_permanent_claim = ROOT
			}
		}
	}
	uu_por_conquer_zanzibar = {
		icon = mission_cannons_firing
		required_missions = { uu_por_shipyards_of_the_east }
		position = 8
		
		provinces_to_highlight = {
			province_id = 1201
			NOT = { owned_by = ROOT }
			has_discovered = ROOT
		}
		
		trigger = { 
			1201 = {
				owned_by = ROOT
			}
		}
	
		effect = {
			1201 = {
				add_base_production = 3
				add_base_manpower = 3
				add_province_modifier = {
					name = "por_makeshift_defenses"
					duration = -1
				}
			}
		}
	}
	uu_por_malabar = {
		icon = mission_portuguese_malabar
		required_missions = { uu_por_india_goa }
		position = 9
		
		provinces_to_highlight = {
			area = malabar_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			malabar_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			lanka_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			south_lanka_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			529 = {
				if = {
					limit = {
						NOT = {
							is_permanent_claim = ROOT
							is_core = ROOT
						}
					}
					add_permanent_claim = ROOT
				}
			}
			4430 = {
				if = {
					limit = {
						NOT = {
							is_permanent_claim = ROOT
							is_core = ROOT
						}
					}
					add_permanent_claim = ROOT
				}
			}
			517 = {
				if = {
					limit = {
						NOT = {
							is_permanent_claim = ROOT
							is_core = ROOT
						}
					}
					add_permanent_claim = ROOT
				}
			}
		}
	}
	uu_por_surat = {
		icon = mission_control_surat
		required_missions = { uu_por_malabar }
		position = 10
		
		provinces_to_highlight = {
			OR = {
				province_id = 529
				province_id = 4430
				province_id = 517
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			529 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			4430 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			517 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			if = {
				limit = {
					has_dlc = "Dharma"
				}
				add_country_modifier = {
					name = "portuguese_surat_modifier"
					duration = 7300
				}
			}
			else = {
				add_mercantilism = 2
			}
			#U.U burma claims moved to malacca branch
		}
	}
	uu_por_casa_da_india = {
		icon = mission_indian_trade_company
		required_missions = { uu_por_surat }
		position = 11
		
		trigger = {
			if = {
				limit = {
					has_dlc = "Dharma"
				}
				calc_true_if = {
					desc = por_indian_investment_tooltip
					india_superregion = {
						type = all
						has_trade_company_investment_in_area = {
							investor = ROOT
							count_one_per_area = yes
						}
					}
					amount = 5
				}
			}
			else = {
				504 = {
					is_strongest_trade_power = ROOT
				}
				1340 = {
					is_strongest_trade_power = ROOT
				}
				1343 = {
					is_strongest_trade_power = ROOT
				}
			}
		}
		effect = {
			set_country_flag = por_india_mission_flag
			country_event = { id = flavor_por.4 }
		}
	}
}

uu_portugal_4_eastern_path = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		has_dlc = "Golden Century"
		tag = POR
		NOT = { map_setup = map_setup_random }
		#NOT = { has_country_flag = uu_por_flag_west_path}
		has_country_flag = uu_por_flag_east_path
		is_random_new_world = no
	}
	has_country_shield = yes

	uu_por_colonize_west_africa = {
		icon = mission_colonial
		required_missions = { uu_por_tordesillas }
		position = 5
		
		provinces_to_highlight = {
			region = guinea_region
			OR = {
				is_city = no
				NOT = { owned_by = ROOT }
			}
			has_discovered = ROOT
		}
		
		trigger = { 
			custom_trigger_tooltip = {
				tooltip = miss_colonize_west_africa
				guinea_region = {
					owned_by = ROOT
					is_city = yes
				}
			}
		}
	
		effect = {
			create_explorer = {
				tradition = 60
			}
			add_dip_power = 60
		}
	}

	uu_por_colonize_central_africa = {
		icon = mission_african_soldier
		required_missions = { uu_por_colonize_west_africa }
		completed_by = 1584.1.1
		position = 6
		
		provinces_to_highlight = {
			region = kongo_region
			NOT = { owned_by = ROOT }
			has_discovered = ROOT
		}
		
		trigger = { 
			custom_trigger_tooltip = {
				tooltip = miss_discover_kongo
				kongo_region = {
					has_discovered = ROOT
				}
			}
			custom_trigger_tooltip = {	
				tooltip = miss_colonize_kongo
				kongo_region = {
					owned_by = ROOT
					is_city = yes
				}
			}
		}
	
		effect = {
			hidden_effect = {
				4097 = {
					discover_country = ROOT
				}
			}
			4097 = {
				add_trade_modifier = {
					who = root
					duration = 5475
					power = 20
					key = ivory_coast_ambition
				}
			}
		}
	}
	uu_por_horn_of_africa = {
		icon = mission_establish_high_seas_navy
		required_missions = { uu_por_cape_of_good_hope }
		completed_by = 1535.1.1
		position = 7
		
		trigger = { 
			custom_trigger_tooltip = {
				tooltip = miss_discover_horn_africa
				OR = {
					mogadishu_area = { has_discovered = ROOT }
					majarteen_area = { has_discovered = ROOT }
					somaliland_area = { has_discovered = ROOT }
				}
			}
		}
	
		effect = {
			1201 = {
				add_trade_modifier = {
					who = root
					duration = 5475
					power = 20
					key = horn_africa_ambition
				}
			}
			2999 = {
				add_permanent_claim = ROOT
			}
		}
	}
	uu_por_india_goa = {
		icon = mission_trade_company_region_abroad
		required_missions = { uu_por_horn_of_africa }
		completed_by = 1536.1.1
		position = 8
		
		trigger = {
			custom_trigger_tooltip = {
				tooltip = portugal_discovers_india.tooltip
				coromandel_region = {
					has_discovered = ROOT
				}
				2030 = {
					has_discovered = POR
				}
			}
		}
		
		effect = {
			define_explorer = {
				name = "Afonso de Albuquerque"
				fire = 5
				shock = 5
				manuever = 5
				siege = 0
			}
			country_event = {
				id = flavor_por.11 #This annexes Goa from the AI, maybe worth reworking?
			}
			malabar_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	uu_por_settle_east_indies = {
		icon = mission_junk_boat
		required_missions = { uu_por_india_goa }
		completed_by = 1536.1.1
		position = 9
		
		provinces_to_highlight = {
			region = malaya_region
			NOT = { owned_by = ROOT }
			has_discovered = ROOT
		}
		
		trigger = {
			custom_trigger_tooltip = {
			tooltip = miss_discover_malaya
				malaya_region = {
					has_discovered = ROOT
				}
			}
			custom_trigger_tooltip = {
				tooltip = miss_colonize_malaya
				malaya_region = {
					owned_by = ROOT
					is_city = yes
				}
			}
		}
	
		effect = {
			add_country_modifier = {
				name = "por_spice_trade"
				duration = 5475
			}
			596 = {
				if = {
					limit = {
						NOT = {
							is_permanent_claim = ROOT
							is_core = ROOT
						}
					}
					add_permanent_claim = ROOT
				}
			}
		}
	}
	uu_por_onward_to_cathay = {
		icon = mission_establish_high_seas_navy
		required_missions = { uu_por_settle_east_indies }
		completed_by = 1542.1.1
		position = 11 #this branch skips a space in vanilla too, i just went with it
		
		trigger = { 
			custom_trigger_tooltip = {
				tooltip = miss_discover_south_china_sea_japan
				japan_region = { has_discovered = ROOT }
				south_china_region = { has_discovered = ROOT }
			}
		}
	
		effect = {
			add_dip_power = 50
			add_prestige = 30
			capital_scope = {
				add_province_modifier = {
					name = "por_erudite_explorers"
					duration = -1
				}
			}
			668 = {
				add_claim = root
			}
		}
	}
	uu_por_trade_with_cathay = {
		icon = mission_trade_with_cathay
		required_missions = { uu_por_onward_to_cathay }
		position = 12
		
		provinces_to_highlight = {
			province_id = 1371
		}
		
		trigger = {
			1371 = {
				trade_share = {
					country = ROOT
					share = 15
				}
			}
			668 = {
				OR = {
					country_or_non_sovereign_subject_holds = ROOT
					owner = {
						is_subject = no
						has_opinion = {
							who = ROOT
							value = 50
						}
					}
				}
			}
		}
		effect = {
			custom_tooltip = macau_event_tooltip
			hidden_effect = {
				if = {
					limit = {
						668 = {
							NOT = { country_or_non_sovereign_subject_holds = ROOT }
							owner = {
								is_subject = no
							}
						}
					}
					
					hidden_effect = {
						668 = {
							owner = {
								country_event = { id = more_flavor_por.1 }
							}
						}
					}
				}
				else = {
					add_mercantilism = 3
				}
			}
		}
	}
	uu_por_trade_with_japan = {
		icon = mission_trade_with_japan
		required_missions = { uu_por_trade_with_cathay }
		position = 13
		
		provinces_to_highlight = {
			OR = {
				province_id = 1376
				AND = {
					province_id = 4182
					NOT = { owned_by = ROOT }
					owner = { NOT = { vassal_of = ROOT } }
				}
			}
		}

		trigger = {
			1376 = {
				trade_share = {
					country = ROOT
					share = 15
				}
			}
			4182 = {
				OR = {
					country_or_non_sovereign_subject_holds = ROOT
					owner = {
						is_subject = no
						has_opinion = {
							who = ROOT
							value = 50
						}
					}
				}
			}
		}
		effect = {
			custom_tooltip = por_japan_mission_tooltip
			hidden_effect = {
				if = {
					limit = {
						4182 = {
							NOT = { country_or_non_sovereign_subject_holds = ROOT }
							owner = {
								is_subject = no
							}
						}
					}
					4182 = {
						owner = {
							country_event = { id = more_flavor_por.3 }
						}
					}
				}
				else = {
					add_mercantilism = 3
				}
			}
		}
	}
}

uu_portugal_5_eastern_path = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		has_dlc = "Golden Century"
		tag = POR
		NOT = { map_setup = map_setup_random }
		#NOT = { has_country_flag = uu_por_flag_west_path}
		has_country_flag = uu_por_flag_east_path
		is_random_new_world = no
	}
	has_country_shield = yes

	uu_por_discover_brazil = {
		icon = mission_establish_high_seas_navy
		required_missions = { uu_por_tordesillas }
		position = 5
		completed_by = 1501.1.1
		
		provinces_to_highlight = {
			colonial_region = colonial_brazil
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = ROOT
		}
		
		trigger = { 
			custom_trigger_tooltip = {
				tooltip = miss_discover_brazil
				colonial_brazil = {
					has_discovered = ROOT
				}
			}
			custom_trigger_tooltip = {
				tooltip = miss_colonize_brazil
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					value = 1
					colonial_region = colonial_brazil
					is_city = yes
				}
			}
		}
	
		effect = {
			add_country_modifier = {
				name = "por_brazil_colonial"
				duration = 5475
			}
		}
	}
	uu_por_a_foothold_in_brazil = {
		icon = mission_iberian_conquistador
		required_missions = { uu_por_discover_brazil }
		completed_by = 1540.1.1
		position = 6
		
		provinces_to_highlight = {
			colonial_region = colonial_brazil
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = ROOT
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 10
				colonial_region = colonial_brazil
				is_city = yes
			}
		}
		
		effect = {
			add_country_modifier = {
				name = "por_brazil_tariffs"
				duration = 7300
			}
		}
	}
	uu_por_triangle_trade = {
		icon = mission_the_triangle_trade
		required_missions = { 
			uu_por_a_foothold_in_brazil 
			uu_por_colonize_central_africa
		}
		position = 7
		
		provinces_to_highlight = {
			OR = {
				province_id = 1466
				province_id = 1531
				province_id = 1293
			}
			NOT = {
				is_strongest_trade_power = ROOT
			}
		}
		
		trigger = {
			1466 = {
				is_strongest_trade_power = ROOT
			}
			1531 = {
				is_strongest_trade_power = ROOT
			}
			1293 = {
				is_strongest_trade_power = ROOT
			}
		}
		effect = {
			add_mercantilism = 2
			custom_tooltip = por_triangle_trade_mission_tooltip
			hidden_effect = {
				every_owned_province = {
					limit = {
						continent = africa
						trade_goods = slaves
					}
					add_province_modifier = {
						name = "por_triangle_trade_modifier"
						duration = 7300
					}
				}
			}
		}
	}
	uu_por_hormuz = {
		icon = mission_persian_soldiers
		required_missions = { uu_por_horn_of_africa }
		position = 8
		completed_by = 1508.1.1
		
		provinces_to_highlight = {
			province_id = 2999
			NOT = { owned_by = ROOT }
			has_discovered = ROOT
		}
		
		trigger = { 
			2999 = {
				owned_by = ROOT
			}
		}
	
		effect = {
			2999 = {
				add_base_production = 3
				add_base_manpower = 3
				add_province_modifier = {
					name = "por_makeshift_defenses"
					duration = -1
				}
			}
			mascat_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	uu_por_oman = {
		icon = mission_portuguese_oman
		required_missions = { uu_por_hormuz }
		position = 9

		provinces_to_highlight = {
			OR = {
				AND = {
					area = mascat_area
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
				AND = {
					province_id = 400
					NOT = { owned_by = ROOT }
				}
			}
		}
		
		trigger = {
			mascat_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			400 = { owned_by = ROOT }
		}
		effect = {
			if = {
				limit = {
					2999 = {
						owned_by = ROOT
					}
				}
				2999 = {
					add_province_modifier = {
						name = "persian_gulf_trade_por"
						duration = -1
					}
				}
			}
			400 = {
				add_province_modifier = {
					name = "persian_gulf_trade_por"
					duration = -1
				}
			}
		}
	}
	uu_por_malacca = {
		icon = mission_portuguese_malacca
		required_missions = { uu_por_settle_east_indies }
		position = 10
		
		provinces_to_highlight = {
			province_id = 596
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			owns_core_province = 596
		}
		effect = {
			if = {
				limit = {
					tag = POR
					religion = catholic
				}
				country_event = { id = more_flavor_por.5 }
			}
			596 = {
				add_province_modifier = {
					name = "portuguese_malacca"
					duration = -1
				}
			}
		}
	}
	uu_por_secure_trade_malacca = {
		icon = mission_junk_boat
		required_missions = { uu_por_malacca }
		position = 11
		
		provinces_to_highlight = {
			province_id = 1361
			has_discovered = ROOT
		}
		
		trigger = { 
			1361 = {		# Straits of Johor
				is_strongest_trade_power = POR
			}
		}
	
		effect = {
			add_country_modifier = {
				name = "por_johor_dominance"
				duration = 7300
			}
			arakan_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			lower_burma_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	uu_por_burma = {
		icon = mission_portuguese_burma
		required_missions = { uu_por_secure_trade_malacca }
		position = 12
		
		provinces_to_highlight = {
			OR = {
				area = arakan_area
				area = lower_burma_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			arakan_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			lower_burma_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			1343 = {
				add_trade_modifier = {
					who = root
					duration = 7300
					power = 50
					key = burmese_trade
				}
			}
		}
	}	
}


